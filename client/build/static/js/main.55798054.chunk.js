(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{289:function(e,t){e.exports="data:image/png;base64,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"},322:function(e,t,a){e.exports=a(591)},327:function(e,t,a){},334:function(e,t,a){},591:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(38),r=a.n(i),o=(a(327),a(20)),l=a(21),c=a(23),u=a(22),d=a(24),h=a(608),m=a(609),p=(a(329),a(331),a(334),a(10)),g=a(599),E=a(43);function v(e){return{type:"USERS_IS_LOADING",isLoading:e}}var f=a(610),S=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchData("https://project-pescadero.herokuapp.com/api/users/current")}},{key:"render",value:function(){return this.props.hasErrored?s.a.createElement("div",null,s.a.createElement(p.i,{className:"jumbo"},s.a.createElement("h1",{className:"display-3"},"Project Pescadero"),s.a.createElement("p",{className:"lead mb-0"},"Changing the world, one small act of kindness at a time."),s.a.createElement("hr",{className:"my-2 mb-3",style:{width:"300px"}}),s.a.createElement("p",{className:"lead",style:{color:"red"}},"Sorry, our website is currently undergoing maintenance. Please check back soon!"))):this.props.isLoading?s.a.createElement("p",null,"Loading\u2026"):"_id"in this.props.user?s.a.createElement(f.a,{to:"/dashboard"}):s.a.createElement("div",null,s.a.createElement(p.i,{className:"jumbo"},s.a.createElement("h1",{className:"display-3"},"Project Pescadero"),s.a.createElement("p",{className:"lead mb-0"},"Changing the world, one small act of kindness at a time."),s.a.createElement("hr",{className:"my-2 mb-3",style:{width:"300px"}}),s.a.createElement("p",{className:"lead"},s.a.createElement(g.a,{to:"/login"},s.a.createElement(p.a,{color:"primary mr-2 px-5"},"Log In")),s.a.createElement(g.a,{to:"/signup"},s.a.createElement(p.a,{color:"primary px-5"},"Sign Up")))))}}]),t}(n.Component),b=Object(E.b)(function(e){return{user:e.user,hasErrored:e.usersHasErrored,isLoading:e.usersIsLoading}},function(e){return{fetchData:function(t){return e(function(e){return function(t){t(v(!0)),fetch(e).then(function(e){if(!e.ok)throw Error(e.statusText);return t(v(!1)),e}).then(function(e){return e.json()}).then(function(e){return t({type:"USERS_FETCH_DATA_SUCCESS",users:e})}).catch(function(){return t({type:"USERS_HAS_ERRORED",hasErrored:!0})})}}(t))}}})(S),C=a(50),w=a(68),y=a(18),I=a(92),j=a(289),k=a.n(j);function O(e){return{type:"ISSUES_HAS_ERRORED",hasErrored:e}}function A(e){return{type:"ISSUES_IS_LOADING",isLoading:e}}function N(e){return function(t){t(A(!0)),fetch(e).then(function(e){if(!e.ok)throw Error(e.statusText);return t(A(!1)),e}).then(function(e){return e.json()}).then(function(e){return t(function(e){return{type:"ISSUES_GET_SUCCESS",issues:e}}(e))}).catch(function(e){console.log(e),t(O(!0))})}}function L(e,t){return function(a){fetch("https://project-pescadero.herokuapp.com/api/issues?id=".concat(t),{method:"delete"}).then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()}).then(function(t){if(t.hasOwnProperty("error"))throw Error(t.error);a(function(e){return{type:"ISSUES_DELETE_SUCCESS",index:e}}(e))}).catch(function(e){console.log(e),a(O(!0))})}}var x=a(602),B=a(607),H=a(601),P=a(605),U=a(284),M=Object(I.withScriptjs)(Object(I.withGoogleMap)(function(e){return s.a.createElement(I.GoogleMap,{zoom:e.zoom,center:e.center,onClick:function(t){e.addMarker(t.latLng,this)}},e.isMarkerShown&&s.a.createElement(I.Marker,{position:{lat:e.currentLocation.lat,lng:e.currentLocation.lng}}),e.issues.map(function(t,a){return s.a.createElement(I.Marker,{position:{lat:Number(t.location.lat),lng:Number(t.location.lng)},icon:{url:k.a,scaledSize:new window.google.maps.Size(40,40)},title:t.title,key:a,onClick:function(){return e.markerClick(t._id)}})}))})),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).showCurrentLocation=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){return a.setState(function(t){return{currentLatLng:Object(w.a)({},t.currentLatLng,{lat:e.coords.latitude,lng:e.coords.longitude}),center:Object(w.a)({},t.center,{lat:e.coords.latitude,lng:e.coords.longitude}),isMarkerShown:!0,zoom:15}})})},a.addMarker=function(e,t){a.setState({zoom:15}),a.setState(function(){return{center:{lat:e.lat(),lng:e.lng()}}});var n={lat:String(e.lat()),lng:String(e.lng())};a.setState(function(e){return{issue:Object(w.a)({},e.issue,{location:n})}}),a.showModalCreate()},a.markerClick=function(e){a.props.getIssues("https://project-pescadero.herokuapp.com/api/issues?id=".concat(e))},a.state={currentLatLng:{lat:37.78768,lng:-122.41094},isMarkerShown:!1,zoom:13,modalVisible:!1,issue:{title:"",description:"",author:a.props.user._id,city:a.props.user.city,location:{lat:"",lng:""},resolved:"false"},titleInvalid:!1,descriptionInvalid:!1,center:{lat:37.78768,lng:-122.41094}},a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(Object(y.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getIssues("https://project-pescadero.herokuapp.com/api/issues"),this.showCurrentLocation()}},{key:"handleChange",value:function(e,t){this.setState(function(e){return{issue:Object(w.a)({},e.issue,Object(C.a)({},t.name,t.value))}}),"description"===t.name&&(t.value.length<49?this.setState({descriptionInvalid:!0}):this.setState({descriptionInvalid:!1})),"title"===t.name&&(t.value.length<5?this.setState({titleInvalid:!0}):this.setState({titleInvalid:!1}))}},{key:"handleSubmit",value:function(){this.props.addIssue(this.state.issue),this.props.getIssues("https://project-pescadero.herokuapp.com/api/issues"),this.setState({modalVisible:!1}),window.location.reload()}},{key:"showModalCreate",value:function(){this.state.modalVisible||(this.setState(function(e){return{issue:Object(w.a)({},e.issue,{title:"",description:""})}}),this.setState({modalVisible:!0}),this.setState({descriptionInvalid:!1}),this.setState({titleInvalid:!1}))}},{key:"render",value:function(){var e=this;return navigator.onLine?s.a.createElement("div",{className:"map_container"},s.a.createElement(M,{isMarkerShown:this.state.isMarkerShown,currentLocation:this.state.currentLatLng,zoom:this.state.zoom,markers:this.state.markers,addMarker:this.addMarker,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyDDwrgWKkdd5dT7ftnPaccBM6zgRb5R90g"),loadingElement:s.a.createElement("div",{style:{height:"100%"}}),containerElement:s.a.createElement("div",{style:{height:"calc(100vh - 57px)"}}),mapElement:s.a.createElement("div",{style:{height:"100%"}}),draggable:!1,issues:this.props.issues,markerClick:this.markerClick,center:this.state.center}),s.a.createElement(x.a,{open:this.state.modalVisible,className:"issue_modal"},s.a.createElement(B.a,{icon:"add",content:"Create Issue"}),s.a.createElement(x.a.Content,null,s.a.createElement(H.a,null,s.a.createElement(H.a.Input,{fluid:!0,label:"Title",placeholder:"Issue title",name:"title",value:this.state.issue.title,onChange:this.handleChange,error:this.state.titleInvalid}),s.a.createElement(H.a.TextArea,{label:"Description",placeholder:"Issue description...",value:this.state.issue.description,name:"description",onChange:this.handleChange,error:this.state.descriptionInvalid}))),s.a.createElement(x.a.Actions,null,s.a.createElement(P.a,{color:"red",onClick:function(){return e.setState({modalVisible:!1})}},s.a.createElement(U.a,{name:"remove"})," Cancel"),s.a.createElement(P.a,{color:"green",disabled:this.state.descriptionInvalid||this.state.titleInvalid||""===this.state.issue.title||""===this.state.issue.description,onClick:function(){return e.handleSubmit()}},s.a.createElement(U.a,{name:"checkmark"})," Save")))):s.a.createElement("div",{className:"no_mas_maps"},s.a.createElement("p",null,s.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji"},"\ud83d\ude31")),s.a.createElement("p",{style:{fontSize:"20px"}},"Oh nooo... did you pay your internet bill? No mas google maps."))}}]),t}(n.Component),R=Object(E.b)(function(e){return{issues:e.issues,user:e.user,hasErrored:e.itemsHasErrored,isLoading:e.itemsIsLoading}},function(e){return{getIssues:function(t){return e(N(t))},removeIssue:function(t,a){return e(L(t,a))},addIssue:function(t){return e(function(e){return function(t){fetch("https://project-pescadero.herokuapp.com/api/issues",{method:"post",body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()}).then(function(a){if(a.hasOwnProperty("error"))throw Error(a.error);t(function(e){return{type:"ISSUES_POST_SUCCESS",issue:e}}(e))}).catch(function(e){console.log(e),t(O(!0))})}}(t))}}})(D),_=a(592),J=a(606),F=a(603),T=a(46),G=a.n(T),V=a(194),X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={user:a.props.user},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"logout",value:function(){G.a.post("https://project-pescadero.herokuapp.com/api/users/logout",{withCredentials:!0}).then(function(e){Object(V.a)("session"),window.location="/"}).catch(function(e){Object(V.a)("session"),window.location="/"})}},{key:"render",value:function(){var e=s.a.createElement("span",null,s.a.createElement(_.a,{avatar:!0,src:"https://via.placeholder.com/100"}));return s.a.createElement(J.a,{secondary:!0,fixed:"top",style:{boxShadow:"0px 1px 10px -1px rgba(0,0,0,0.75)",zIndex:"150",padding:"3.5px"}},s.a.createElement(J.a.Item,{header:!0},"Project Pescadero"),s.a.createElement(F.a,{item:!0,trigger:e,className:"right px-5"},s.a.createElement(F.a.Menu,null,s.a.createElement(F.a.Header,null,this.props.user.firstName),s.a.createElement(F.a.Divider,null),s.a.createElement(F.a.Item,{onClick:this.logout},"Logout"))))}}]),t}(n.Component),Y=Object(E.b)(function(e){return{user:e.user,hasErrored:e.usersHasErrored,isLoading:e.usersIsLoading}})(X),Q=a(604),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleItemClick=function(e,t){var n=t.name;switch(n){case"all":a.props.getIssues("https://project-pescadero.herokuapp.com/api/issues");break;case"open":a.props.getIssues("https://project-pescadero.herokuapp.com/api/issues?resolved=false");break;case"resolved":a.props.getIssues("https://project-pescadero.herokuapp.com/api/issues?resolved=true");break;case"opened by me":case"resolved by me":console.log("open");break;default:console.log(n)}a.setState({activeItem:n})},a.state={activeItem:"all",modalVisible:!1,issue:{title:"",description:"",author:a.props.user._id,city:a.props.user.city,location:{lat:"",lng:""},resolved:"false"},titleInvalid:!1,descriptionInvalid:!1,openIssues:0,resolvedIssues:0},a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(Object(y.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e,t){this.setState(function(e){return{issue:Object(w.a)({},e.issue,Object(C.a)({},t.name,t.value))}}),"description"===t.name&&(t.value.length<49?this.setState({descriptionInvalid:!0}):this.setState({descriptionInvalid:!1})),"title"===t.name&&(t.value.length<5?this.setState({titleInvalid:!0}):this.setState({titleInvalid:!1}))}},{key:"handleSubmit",value:function(){var e={_id:this.state.issue._id,title:this.state.issue.title,description:this.state.issue.description,author:this.props.user._id,city:this.props.user.city,location:{lat:this.state.issue.location.lat,lng:this.state.issue.location.lng},resolved:this.state.issue.resolved};this.props.updateIssue(e),this.setState({modalVisible:!1}),this.updateCount()}},{key:"handleDeleteIssue",value:function(e,t){window.confirm("Are you sure you wish to delete issue ".concat(t.title,"?"))&&(this.props.removeIssue(e,t._id),this.updateCount())}},{key:"showModalEdit",value:function(e){this.state.modalVisible||(this.setState({issue:e}),this.setState({modalVisible:!0}),this.setState({descriptionInvalid:!1}),this.setState({titleInvalid:!1}))}},{key:"resolveBtnClick",value:function(e){this.setState({issue:e});var t={_id:e._id,resolved:"true",resolvedBy:this.props.user._id,location:e.location,title:e.title,description:e.description,author:e.author._id,city:e.city._id};this.props.updateIssue(t),this.updateCount()}},{key:"componentWillMount",value:function(){this.updateCount()}},{key:"updateCount",value:function(){var e=this;G.a.get("https://project-pescadero.herokuapp.com/api/issues?resolved=true").then(function(t){e.setState({resolvedIssues:t.data.length})}),G.a.get("https://project-pescadero.herokuapp.com/api/issues?resolved=false").then(function(t){e.setState({openIssues:t.data.length})})}},{key:"render",value:function(){var e=this,t=this.state.activeItem;return this.props.hasErrored?s.a.createElement("p",null,"Sorry! There was an error loading the issues"):this.props.isLoading?s.a.createElement("p",null,"Loading\u2026"):this.props.issues.length?s.a.createElement("div",{className:"issues_container"},s.a.createElement("div",{style:{marginBottom:"12px"}},s.a.createElement("span",{className:"ui huge header mx-3 mr-4"},"Issues"),s.a.createElement("span",{className:"ui tiny header"},this.state.openIssues," Open issues. ",this.state.resolvedIssues," Resolved."),s.a.createElement(J.a,{pointing:!0,secondary:!0},s.a.createElement(J.a.Item,{name:"all",active:"all"===t,onClick:this.handleItemClick}),s.a.createElement(J.a.Item,{name:"open",active:"open"===t,onClick:this.handleItemClick}),s.a.createElement(J.a.Item,{name:"resolved",active:"resolved"===t,onClick:this.handleItemClick}))),s.a.createElement("div",{className:"issues ui centered cards px-2"},this.props.issues.map(function(t,a){return s.a.createElement(Q.a,{fluid:!0,key:a},s.a.createElement(Q.a.Content,null,s.a.createElement(_.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),s.a.createElement(Q.a.Header,null,t.title),s.a.createElement(Q.a.Meta,null,"by: ",t.author.firstName),s.a.createElement(Q.a.Description,null,t.description)),s.a.createElement(Q.a.Content,{extra:!0},s.a.createElement("div",{className:"ui buttons right floated"},t.author._id===e.props.user._id&&s.a.createElement(P.a,{animated:"vertical",negative:!0,onClick:function(){return e.handleDeleteIssue(a,t)}},s.a.createElement(P.a.Content,{hidden:!0},"Delete"),s.a.createElement(P.a.Content,{visible:!0},s.a.createElement(U.a,{name:"trash"}))),t.author._id===e.props.user._id&&s.a.createElement(P.a,{animated:"vertical",primary:!0,onClick:function(){return e.showModalEdit(t)}},s.a.createElement(P.a.Content,{hidden:!0},"Edit"),s.a.createElement(P.a.Content,{visible:!0},s.a.createElement(U.a,{name:"pencil"}))),t.author._id!==e.props.user._id&&"false"===t.resolved&&s.a.createElement(P.a,{positive:!0,onClick:function(){return e.resolveBtnClick(t)}},"Resolve"),t.author._id!==e.props.user._id&&"true"===t.resolved&&s.a.createElement(P.a,{positive:!0,disabled:!0},"Resolved"))))})),s.a.createElement(x.a,{open:this.state.modalVisible,className:"issue_modal"},s.a.createElement(B.a,{icon:"pencil",content:"Edit Issue"}),s.a.createElement(x.a.Content,null,s.a.createElement(H.a,null,s.a.createElement(H.a.Input,{fluid:!0,label:"Title",placeholder:"Issue title",name:"title",value:this.state.issue.title,onChange:this.handleChange,error:this.state.titleInvalid}),s.a.createElement(H.a.TextArea,{label:"Description",placeholder:"Issue description...",value:this.state.issue.description,name:"description",onChange:this.handleChange,error:this.state.descriptionInvalid}))),s.a.createElement(x.a.Actions,null,s.a.createElement(P.a,{color:"red",onClick:function(){return e.setState({modalVisible:!1})}},s.a.createElement(U.a,{name:"remove"})," Cancel"),s.a.createElement(P.a,{color:"green",disabled:this.state.descriptionInvalid||this.state.titleInvalid||""===this.state.issue.title||""===this.state.issue.description,onClick:function(){return e.handleSubmit()}},s.a.createElement(U.a,{name:"checkmark"})," Save")))):s.a.createElement("div",{className:"issues_container"},s.a.createElement("div",{style:{marginBottom:"12px"}},s.a.createElement("span",{className:"ui huge header mx-3 mr-4"},"Issues"),s.a.createElement("span",{className:"ui tiny header"},this.state.openIssues," Open issues. ",this.state.resolvedIssues," Resolved."),s.a.createElement(J.a,{pointing:!0,secondary:!0},s.a.createElement(J.a.Item,{name:"all",active:"all"===t,onClick:this.handleItemClick}),s.a.createElement(J.a.Item,{name:"open",active:"open"===t,onClick:this.handleItemClick}),s.a.createElement(J.a.Item,{name:"resolved",active:"resolved"===t,onClick:this.handleItemClick}))),s.a.createElement("p",{className:"ml-4 ui header"},"No issues to display!"))}}]),t}(n.Component),W=Object(E.b)(function(e){return{issues:e.issues,user:e.user,hasErrored:e.itemsHasErrored,isLoading:e.itemsIsLoading}},function(e){return{getIssues:function(t){return e(N(t))},removeIssue:function(t,a){return e(L(t,a))},updateIssue:function(t){return e(function(e){return function(t){console.log(JSON.stringify(e)),fetch("https://project-pescadero.herokuapp.com/api/issues?id=".concat(e._id),{method:"put",body:JSON.stringify(e)}).then(function(e){if(console.log("hello"),!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()}).then(function(e){if(e.hasOwnProperty("error"))throw Error(e.error);console.log(e),t({type:"ISSUES_PUT_SUCCESS",issue:e})}).catch(function(e){console.log(e),t(O(!0))})}}(t))}}})(z),K=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(W,null)}}]),t}(n.Component),Z=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.user.hasOwnProperty("firstName")||console.log(this.props.user),s.a.createElement("div",{style:{width:"100%"}},s.a.createElement(Y,null),s.a.createElement("div",{className:"dashboard_container"},s.a.createElement(R,null),s.a.createElement(K,null)))}}]),t}(n.Component),q=Object(E.b)(function(e){return{user:e.user,hasErrored:e.usersHasErrored,isLoading:e.usersIsLoading}})(Z),$=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={firstName:"",lastName:"",email:"",password:"",confirmPassword:"",city:"",emailInvalid:!1,passwordInvalid:!1,confirmPasswordInvalid:!1},a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(Object(y.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){if(document.getElementById("email-feedback").innerHTML="Please enter a valid email address!",this.setState(Object(C.a)({},e.target.name,e.target.value)),"email"===e.target.name&&(/.+@.+\..+/.test(e.target.value)?this.setState({emailInvalid:!1}):this.setState({emailInvalid:!0})),"password"===e.target.name&&(e.target.value.length>5?this.setState({passwordInvalid:!1}):this.setState({passwordInvalid:!0})),"confirmPassword"===e.target.name){var t=document.querySelector("[name='password']").value;e.target.value===t?this.setState({confirmPasswordInvalid:!1}):this.setState({confirmPasswordInvalid:!0})}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),G.a.post("https://project-pescadero.herokuapp.com/api/users",this.state,{withCredentials:!0}).then(function(e){"error"in e.data?(t.setState({emailInvalid:!0}),document.getElementById("email-feedback").innerHTML='Email already registered! Please <a href="/login">login</a>'):G.a.post("https://project-pescadero.herokuapp.com/api/users/login",t.state,{withCredentials:!0}).then(function(e){e.data.hasOwnProperty("error")?(console.log(e.data.error),e.data.error.includes("password")?t.setState({passwordInvalid:!0}):t.setState({emailInvalid:!0})):window.location="/dashboard"}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){var e=this,t=document.querySelector("[name='city']");G.a.get("https://project-pescadero.herokuapp.com/api/cities").then(function(a){for(var n=0;n<a.data.length;n++){var s=document.createElement("option");s.value=a.data[n]._id.toString(),e.setState({city:a.data[n]._id.toString()}),s.text="".concat(a.data[n].name,", ").concat(a.data[n].state," (").concat(a.data[n].country,")"),t.add(s)}}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",{className:"display-4 mt-3 text-center"},"Sign Up"),s.a.createElement(p.b,{className:"my-3 mx-3 mb-5"},s.a.createElement(p.c,null,s.a.createElement(p.e,{onSubmit:this.handleSubmit},s.a.createElement(p.k,{form:!0},s.a.createElement(p.d,{md:6},s.a.createElement(p.g,null,s.a.createElement(p.j,{for:"firstName"},"First Name"),s.a.createElement(p.h,{type:"text",name:"firstName",id:"firstName",value:this.state.firstName,onChange:this.handleChange}))),s.a.createElement(p.d,{md:6},s.a.createElement(p.g,null,s.a.createElement(p.j,{for:"lastName"},"Last Name"),s.a.createElement(p.h,{type:"text",name:"lastName",id:"lastName",value:this.state.lastName,onChange:this.handleChange})))),s.a.createElement(p.g,null,s.a.createElement(p.j,{for:"email"},"Email"),s.a.createElement(p.h,{type:"text",name:"email",id:"email",value:this.state.email,onChange:this.handleChange,invalid:this.state.emailInvalid}),s.a.createElement(p.f,{id:"email-feedback",invalid:!0},"Please enter a valid email address!")),s.a.createElement(p.g,null,s.a.createElement(p.j,{for:"password"},"Password"),s.a.createElement(p.h,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange,invalid:this.state.passwordInvalid}),s.a.createElement(p.f,{invalid:!0,visible:!0},"Password must be at least 6 characters!")),s.a.createElement(p.g,null,s.a.createElement(p.j,{for:"confirmPassword"},"Confirm Password"),s.a.createElement(p.h,{type:"password",name:"confirmPassword",id:"confirmPassword",value:this.state.confirmPassword,onChange:this.handleChange,invalid:this.state.confirmPasswordInvalid}),s.a.createElement(p.f,{invalid:!0},"Passwords must match!")),s.a.createElement(p.g,null,s.a.createElement(p.j,{for:"city"},"City"),s.a.createElement(p.h,{type:"select",name:"city",id:"city",value:this.state.city,onChange:this.handleChange})),s.a.createElement(p.a,{type:"submit",color:"primary",style:{float:"right"},disabled:this.state.emailInvalid||this.state.passwordInvalid||this.state.confirmPasswordInvalid||""===this.state.email||""===this.state.password||""===this.state.confirmPassword||""===this.state.firstName||""===this.state.lastName||""===this.state.city},"Create Account")))))}}]),t}(n.Component),ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",emailInvalid:!1,passwordInvalid:!1},a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(Object(y.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState({passwordInvalid:!1}),this.setState({passwordInvalid:!1}),this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),G.a.post("https://project-pescadero.herokuapp.com/api/users/login",this.state,{withCredentials:!0}).then(function(e){e.data.hasOwnProperty("error")?(console.log(e.data.error),e.data.error.includes("password")?t.setState({passwordInvalid:!0}):t.setState({emailInvalid:!0})):window.location="#/dashboard"}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",{className:"display-4 mt-3 text-center"},"Login"),s.a.createElement(p.b,{className:"my-3 mx-3 mb-5"},s.a.createElement(p.c,{style:{minWidth:"30vw"}},s.a.createElement(p.e,{onSubmit:this.handleSubmit},s.a.createElement(p.g,null,s.a.createElement(p.j,{for:"email"},"Email"),s.a.createElement(p.h,{type:"text",name:"email",id:"email",value:this.state.email,onChange:this.handleChange,invalid:this.state.emailInvalid}),s.a.createElement(p.f,{id:"email-feedback",invalid:!0},"Email not registered! Please ",s.a.createElement("a",{href:"/signup"},"sign up"))),s.a.createElement(p.g,null,s.a.createElement(p.j,{for:"password"},"Password"),s.a.createElement(p.h,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange,invalid:this.state.passwordInvalid}),s.a.createElement(p.f,{id:"password-feedback",invalid:!0},"Password incorrect!")),s.a.createElement(p.a,{type:"submit",color:"primary",style:{float:"right"},disabled:this.state.emailInvalid||this.state.passwordInvalid||""===this.state.email||""===this.state.password},"Log In")))))}}]),t}(n.Component),te=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(h.a,null,s.a.createElement("div",{className:"page_container"},s.a.createElement(m.a,{exact:!0,path:"/",component:b}),s.a.createElement(m.a,{exact:!0,path:"/signup",component:$}),s.a.createElement(m.a,{exact:!0,path:"/login",component:ee}),s.a.createElement(m.a,{exact:!0,path:"/dashboard",component:q})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=a(77),ne=a(312);var se=a(93);var ie=Object(ae.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_FETCH_DATA_SUCCESS":return t.users;default:return e}},usersHasErrored:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_HAS_ERRORED":return t.hasErrored;default:return e}},usersIsLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_IS_LOADING":return t.isLoading;default:return e}},issues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ISSUES_GET_SUCCESS":return t.issues;case"ISSUES_DELETE_SUCCESS":return Object(se.a)(e.slice(0,t.index)).concat(Object(se.a)(e.slice(t.index+1)));case"ISSUES_POST_SUCCESS":return Object(se.a)(e).concat([t.issue]);case"ISSUES_PUT_SUCCESS":var a=e.findIndex(function(e){return e._id===t.issue._id});return Object(se.a)(e.slice(0,a)).concat([t.issue],Object(se.a)(e.slice(a+1)));default:return e}},issuesHasErrored:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ISSUES_HAS_ERRORED":return t.hasErrored;default:return e}},issuesIsLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ISSUES_IS_LOADING":return t.isLoading;default:return e}}}),re=Object(ae.d)(ie,{},Object(ae.a)(ne.a));r.a.render(s.a.createElement(E.a,{store:re},s.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[322,2,1]]]);
//# sourceMappingURL=main.55798054.chunk.js.map